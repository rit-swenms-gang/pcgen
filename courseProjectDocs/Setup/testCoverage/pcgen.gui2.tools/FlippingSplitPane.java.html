<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FlippingSplitPane.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">pcgen</a> &gt; <a href="index.source.html" class="el_package">pcgen.gui2.tools</a> &gt; <span class="el_source">FlippingSplitPane.java</span></div><h1>FlippingSplitPane.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2002, 2003 (C) B. K. Oxley (binkley) &lt;binkley@alumni.rice.edu&gt;
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public License
 * as published by the Free Software Foundation; either version 2.1 of
 * the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307
 * USA.
 *
 */
package pcgen.gui2.tools; // hm.binkley.gui;

import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;

import javax.swing.AbstractAction;
import javax.swing.JCheckBoxMenuItem;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JPopupMenu;
import javax.swing.JSplitPane;
import javax.swing.plaf.SplitPaneUI;
import javax.swing.plaf.basic.BasicSplitPaneUI;

import pcgen.gui2.util.event.PopupMouseAdapter;
import pcgen.system.LanguageBundle;

/**
 * {@code FlippingSplitPane} is an improved version of
 * {@code JSplitPane} featuring a popup menu accesses by right-clicking on
 * the divider.
 * 
 * &lt;p&gt;({@code JSplitPane} is used to divide two (and only two)
 * {@code Component}s.  The two {@code Component}s are graphically
 * divided based on the look and feel implementation, and the two
 * {@code Component}s can then be interactively resized by the user.
 * Information on using {@code JSplitPane} is in &lt;a
 * href=&quot;http://java.sun.com/docs/books/tutorial/uiswing/components/splitpane.html&quot;&gt;How
 * to Use Split Panes&lt;/a&gt; in &lt;em&gt;The Java Tutorial&lt;/em&gt;.)
 * 
 * &lt;p&gt;In addition to the standard keyboard keys used by {@code JSplitPane},
 * {@code FlippingSplitPane} will flip the panes orientation on
 * {@code SHIFT-BUTTON1}.
 * 
 * &lt;p&gt;(For the keyboard keys used by {@code JSplitPane} in the standard Look
 * and Feel (L&amp;amp;F) renditions, see the &lt;a href=&quot;doc-files/Key-Index.html#JSplitPane&quot;&gt;{@code JSplitPane}
 * key assignments&lt;/a&gt;.)
 * 
 * &lt;p&gt;{@code FlippingSplitPane} treats many of the methods of
 * {@code JSplitPane} recursively, calling the same method on the left and
 * right components (or top and bottom for {@code VERTICAL_ORIENTATION}) if
 * they are also {@code FlippingSplitPane}s.  You can defeat this behavior
 * by using {@code JSplitPane} components instead.
 * 
 * &lt;p&gt;{@code FlippingSplitPane} also supports &quot;locking&quot;: a locked pane renders
 * the divider unmovable, and the popup menu only has an &quot;Unlocked&quot; item.
 * Locking is also recursive for {@code FlippingSplitPane} components.
 *
 */
public class FlippingSplitPane extends JSplitPane
{
<span class="nc" id="L73">	private final LockAction lockAction = new LockAction();</span>
	private JPopupMenu popupMenu;

	/**
	 * Creates a new {@code FlippingSplitPane}.  Panes begin as unlocked
	 */
	public FlippingSplitPane()
<span class="nc" id="L80">	{</span>
<span class="nc" id="L81">		setupExtensions();</span>
<span class="nc" id="L82">	}</span>

	/**
	 * Creates a new {@code FlippingSplitPane}.  Panes begin as unlocked, and
	 * otherwise take the defaults of {@link JSplitPane#JSplitPane(int)}.
	 */
	public FlippingSplitPane(int newOrientation)
	{
<span class="nc" id="L90">		super(newOrientation);</span>

<span class="nc" id="L92">		setupExtensions();</span>
<span class="nc" id="L93">	}</span>

	/**
	 * Creates a new {@code FlippingSplitPane}.  Panes begin as unlocked, and
	 * otherwise take the defaults of {@link JSplitPane#JSplitPane(int, Component,
	 * Component)}.
	 */
	public FlippingSplitPane(int newOrientation, Component newLeftComponent, Component newRightComponent)
	{
<span class="nc" id="L102">		super(newOrientation, newLeftComponent, newRightComponent);</span>

<span class="nc" id="L104">		setupExtensions();</span>
<span class="nc" id="L105">	}</span>

	/**
	 * Creates a new {@code FlippingSplitPane}.  Panes begin as unlocked, and
	 * otherwise take the defaults of {@link JSplitPane#JSplitPane(int, boolean,
	 * Component, Component)}.
	 */
	public FlippingSplitPane(int newOrientation, boolean newContinuousLayout, Component newLeftComponent,
	                         Component newRightComponent)
	{
<span class="nc" id="L115">		super(newOrientation, newContinuousLayout, newLeftComponent, newRightComponent);</span>

<span class="nc" id="L117">		setupExtensions();</span>
<span class="nc" id="L118">	}</span>

	/**
	 * {@code setContinuousLayout} recursively calls {@link
	 * JSplitPane#setContinuousLayout(boolean)} on {@code FlippingSplitPane}
	 * components.
	 *
	 * @param newContinuousLayout {@code boolean}, the setting
	 */
	@Override
	public void setContinuousLayout(boolean newContinuousLayout)
	{
<span class="nc bnc" id="L130" title="All 2 branches missed.">		if (newContinuousLayout == isContinuousLayout())</span>
		{
<span class="nc" id="L132">			return;</span>
		}

<span class="nc" id="L135">		super.setContinuousLayout(newContinuousLayout);</span>
<span class="nc" id="L136">		maybeSetContinuousLayoutComponent(getLeftComponent(), newContinuousLayout);</span>
<span class="nc" id="L137">		maybeSetContinuousLayoutComponent(getRightComponent(), newContinuousLayout);</span>
<span class="nc" id="L138">	}</span>

	/**
	 * {@code setDividerLocation} calls {@link JSplitPane#setDividerLocation(int)}
	 * unless the {@code FlippingSplitPane} is locked.
	 *
	 * @param location {@code int}, the location
	 */
	@Override
	public void setDividerLocation(int location)
	{
<span class="nc bnc" id="L149" title="All 2 branches missed.">		if (isLocked())</span>
		{
<span class="nc" id="L151">			super.setDividerLocation(getLastDividerLocation());</span>
		}
		else
		{
<span class="nc" id="L155">			super.setDividerLocation(location);</span>
		}
<span class="nc" id="L157">	}</span>

	@Override
	public void setDividerSize(int newSize)
	{
<span class="nc bnc" id="L162" title="All 2 branches missed.">		if (newSize == getDividerSize())</span>
		{
<span class="nc" id="L164">			return;</span>
		}

<span class="nc" id="L167">		super.setDividerSize(newSize);</span>
<span class="nc" id="L168">		maybeSetDividerSizeComponent(getLeftComponent(), newSize);</span>
<span class="nc" id="L169">		maybeSetDividerSizeComponent(getRightComponent(), newSize);</span>
<span class="nc" id="L170">	}</span>

	/**
	 * {@code setOneTouchExpandable} recursively calls {@link
	 * JSplitPane#setOneTouchExpandable(boolean)} on {@code FlippingSplitPane}
	 * components.
	 *
	 * @param newOneTouchExpandable {@code boolean}, the setting
	 */
	@Override
	public void setOneTouchExpandable(boolean newOneTouchExpandable)
	{
<span class="nc bnc" id="L182" title="All 2 branches missed.">		if (newOneTouchExpandable == isOneTouchExpandable())</span>
		{
<span class="nc" id="L184">			return;</span>
		}

<span class="nc" id="L187">		super.setOneTouchExpandable(newOneTouchExpandable);</span>
<span class="nc" id="L188">		maybeSetOneTouchExpandableComponent(getLeftComponent(), newOneTouchExpandable);</span>
<span class="nc" id="L189">		maybeSetOneTouchExpandableComponent(getRightComponent(), newOneTouchExpandable);</span>
<span class="nc" id="L190">	}</span>

	/**
	 * {@code setOrientation} recursively calls {@link
	 * JSplitPane#setOrientation(int)} on {@code FlippingSplitPane}
	 * components, alternating the orietation so as to achieve a &quot;criss-cross&quot;
	 * affect.
	 *
	 * @param newOrientation {@code int}, the orientation
	 *
	 * @throws IllegalArgumentException if orientation is not one of:
	 * HORIZONTAL_SPLIT or VERTICAL_SPLIT.
	 */
	@Override
	public void setOrientation(int newOrientation)
	{
<span class="nc bnc" id="L206" title="All 2 branches missed.">		if (newOrientation == getOrientation())</span>
		{
<span class="nc" id="L208">			return;</span>
		}

<span class="nc" id="L211">		super.setOrientation(newOrientation);</span>

<span class="nc" id="L213">		int subOrientation = invertOrientation(newOrientation);</span>
<span class="nc" id="L214">		maybeSetOrientationComponent(getLeftComponent(), subOrientation);</span>
<span class="nc" id="L215">		maybeSetOrientationComponent(getRightComponent(), subOrientation);</span>
<span class="nc" id="L216">	}</span>

	/**
	 * {@code resetToPreferredSizes} recursively calls  on {@code FlippingSplitPane}
	 * components.
	 */
	@Override
	public void resetToPreferredSizes()
	{
<span class="nc" id="L225">		fixedResetToPreferredSizes();</span>
<span class="nc" id="L226">		maybeResetToPreferredSizesComponent(getLeftComponent());</span>
<span class="nc" id="L227">		maybeResetToPreferredSizesComponent(getRightComponent());</span>
<span class="nc" id="L228">	}</span>

	/**
	 * Center {@code FlippingSplitPane} components; do nothing for other
	 * components.
	 *
	 * @param c {@code Component}, the component.
	 */
	private static void maybeCenterDividerLocationsComponent(Component c)
	{
<span class="nc bnc" id="L238" title="All 2 branches missed.">		if (c instanceof FlippingSplitPane)</span>
		{
<span class="nc" id="L240">			((FlippingSplitPane) c).centerDividerLocations();</span>
		}
<span class="nc" id="L242">	}</span>

	/**
	 * {@code centerDividerLocations} sets the divider location in the middle
	 * by recursively calling {@code setDividerLocation(0.5)}.
	 *
	 * @see #setDividerLocation(double)
	 */
	private void centerDividerLocations()
	{
<span class="nc" id="L252">		setDividerLocation(0.5);</span>
<span class="nc" id="L253">		maybeCenterDividerLocationsComponent(getLeftComponent());</span>
<span class="nc" id="L254">		maybeCenterDividerLocationsComponent(getRightComponent());</span>
<span class="nc" id="L255">	}</span>

	/**
	 * Reset {@code FlippingSplitPane} components; do nothing for other
	 * components (not even {@code JSplitPane} components).
	 *
	 * @param c {@code Component}, the component.
	 */
	private static void maybeResetToPreferredSizesComponent(Component c)
	{
<span class="nc bnc" id="L265" title="All 2 branches missed.">		if (c instanceof FlippingSplitPane)</span>
		{
<span class="nc" id="L267">			((FlippingSplitPane) c).resetToPreferredSizes();</span>
		}
<span class="nc" id="L269">	}</span>

	/**
	 * {@code fixedResetToPreferredSizes} fixes a bug whereby flipping a pane
	 * from vertical to horizontal sets the divider location to {@code 1},
	 * thereby hiding the left component.
	 */
	private void fixedResetToPreferredSizes()
	{
<span class="nc" id="L278">		setDividerLocation((getMinimumDividerLocation() + getMaximumDividerLocation()) / 2);</span>
<span class="nc" id="L279">	}</span>

	/**
	 * {@code invertOrientation} is a convenience function to turn horizontal
	 * into vertical orientations and the converse.
	 *
	 * @param orientation {@code int}, either {@code HORIZONTAL_ORIENTATION}
	 * or {@code VERTICAL_ORIENTATION}
	 *
	 * @return {@code int}, the inverse
	 */
	private static int invertOrientation(int orientation)
	{
<span class="nc bnc" id="L292" title="All 2 branches missed.">		return orientation == HORIZONTAL_SPLIT ? VERTICAL_SPLIT : HORIZONTAL_SPLIT;</span>
	}

	/**
	 * Flip {@code FlippingSplitPane} components; do nothing for other
	 * components.
	 *
	 * @param c {@code Component}, the component.
	 */
	private static void maybeFlipComponent(Component c)
	{
<span class="nc bnc" id="L303" title="All 2 branches missed.">		if (c instanceof FlippingSplitPane)</span>
		{
<span class="nc" id="L305">			((FlippingSplitPane) c).flipOrientation();</span>
		}
<span class="nc" id="L307">	}</span>

	/**
	 * {@code flipOrientation} inverts the current orientation of the panes,
	 * recursively flipping {@code FlippingSplitPane} components.
	 */
	private void flipOrientation()
	{
<span class="nc" id="L315">		super.setOrientation(invertOrientation(getOrientation()));</span>
<span class="nc" id="L316">		maybeFlipComponent(getLeftComponent());</span>
<span class="nc" id="L317">		maybeFlipComponent(getRightComponent());</span>

<span class="nc" id="L319">		resetToPreferredSizes(); // gets munched anyway?  XXX</span>
<span class="nc" id="L320">	}</span>

	private static void maybeSetDividerSizeComponent(Component c, int size)
	{
<span class="nc bnc" id="L324" title="All 2 branches missed.">		if (c instanceof FlippingSplitPane)</span>
		{
<span class="nc" id="L326">			((FlippingSplitPane) c).setDividerSize(size);</span>
		}
<span class="nc" id="L328">	}</span>

	/**
	 * Set continuous layout for {@code FlippingSplitPane} components; do
	 * nothing for other components (not even {@code JSplitPane} components).
	 *
	 * @param c {@code Component}, the component
	 * @param newContinuousLayout {@code boolean}, the setting
	 */
	private static void maybeSetContinuousLayoutComponent(Component c, boolean newContinuousLayout)
	{
<span class="nc bnc" id="L339" title="All 2 branches missed.">		if (c instanceof FlippingSplitPane)</span>
		{
<span class="nc" id="L341">			((FlippingSplitPane) c).setContinuousLayout(newContinuousLayout);</span>
		}
<span class="nc" id="L343">	}</span>

	/**
	 * Set one touch expandable for {@code FlippingSplitPane} components; do
	 * nothing for other components (not even {@code JSplitPane} components).
	 *
	 * @param c {@code Component}, the component
	 * @param newOneTouchExpandable {@code boolean}, the setting
	 */
	private static void maybeSetOneTouchExpandableComponent(Component c, boolean newOneTouchExpandable)
	{
<span class="nc bnc" id="L354" title="All 2 branches missed.">		if (c instanceof FlippingSplitPane)</span>
		{
<span class="nc" id="L356">			((FlippingSplitPane) c).setOneTouchExpandable(newOneTouchExpandable);</span>
		}
<span class="nc" id="L358">	}</span>

	/**
	 * Set orientation for {@code FlippingSplitPane} components; do nothing
	 * for other components (not even {@code JSplitPane} components).
	 *
	 * @param c {@code Component}, the component
	 * @param newOrientation {@code int}, the orientation
	 */
	private static void maybeSetOrientationComponent(Component c, int newOrientation)
	{
<span class="nc bnc" id="L369" title="All 2 branches missed.">		if (c instanceof FlippingSplitPane)</span>
		{
<span class="nc" id="L371">			((FlippingSplitPane) c).setOrientation(newOrientation);</span>
		}
<span class="nc" id="L373">	}</span>

	/**
	 * Gets the {@code locked} property.
	 *
	 * @return the value of the {@code locked} property
	 *
	 * @see #setLocked
	 */
	private boolean isLocked()
	{
<span class="nc" id="L384">		return lockAction.isLocked();</span>
	}

	/**
	 * Set locked for {@code FlippingSplitPane} components; do nothing for
	 * other components.
	 *
	 * @param c {@code Component}, the component
	 * @param locked {@code boolean}, the setting
	 */
	private static void maybeSetLockedComponent(Component c, boolean locked)
	{
<span class="nc bnc" id="L396" title="All 2 branches missed.">		if (c instanceof FlippingSplitPane)</span>
		{
<span class="nc" id="L398">			((FlippingSplitPane) c).setLocked(locked);</span>
		}
<span class="nc" id="L400">	}</span>

	/**
	 * Sets the value of the {@code locked} property, which must be
	 * {@code true} for the child components to be locked against changes. The
	 * default value of this property is {@code false}.
	 *
	 * @param locked {@code int}, the setting
	 *
	 * @see #isLocked
	 */
	private void setLocked(boolean locked)
	{
<span class="nc" id="L413">		lockAction.setLocked(locked);</span>
<span class="nc" id="L414">	}</span>

	/**
	 * {@code setupExtensions} installs the mouse listener for the popup menu,
	 * and fixes some egregious defaults in {@code JSplitPane}.
	 */
	private void setupExtensions()
	{
<span class="nc" id="L422">		SplitPaneUI anUi = getUI();</span>

<span class="nc bnc" id="L424" title="All 2 branches missed.">		if (anUi instanceof BasicSplitPaneUI)</span>
		{
<span class="nc" id="L426">			((BasicSplitPaneUI) anUi).getDivider().addMouseListener(new PopupListener());</span>
		}
<span class="nc" id="L428">		setResizeWeight(0.5);</span>
<span class="nc" id="L429">	}</span>

	private final class LockAction extends AbstractAction
	{

		/**
		 * Workaround for bug with locking panes; this is easier that big surgery on
		 * BasicSplitPaneDivider.
		 */
<span class="nc" id="L438">		private boolean wasContinuousLayout = false;</span>
		/**
		 * Is the split pane locked?
		 */
<span class="nc" id="L442">		private boolean locked = false;</span>

		public LockAction()
<span class="nc" id="L445">		{</span>
<span class="nc" id="L446">			configureProps();</span>
<span class="nc" id="L447">		}</span>

		/**
		 * Configures MenuItem properties based on locked state
		 */
		private void configureProps()
		{
<span class="nc bnc" id="L454" title="All 2 branches missed.">			String prop = locked ? &quot;unlock&quot; : &quot;lock&quot;;</span>
<span class="nc" id="L455">			putValue(NAME, LanguageBundle.getString(&quot;in_&quot; + prop));</span>
<span class="nc" id="L456">			putValue(MNEMONIC_KEY, LanguageBundle.getMnemonic(&quot;in_mn_&quot; + prop));</span>
<span class="nc" id="L457">		}</span>

		/**
		 * Action for Lock/Unlock item in popup menu.
		 */
		@Override
		public void actionPerformed(ActionEvent e)
		{
<span class="nc bnc" id="L465" title="All 2 branches missed.">			setLocked(!locked);</span>
<span class="nc" id="L466">		}</span>

		public boolean isLocked()
		{
<span class="nc" id="L470">			return locked;</span>
		}

		/**
		 * Sets the value of the {@code locked} property, which must be
		 * {@code true} for the child components to be locked against changes. The
		 * default value of this property is {@code false}.
		 *
		 * @param locked {@code int}, the setting
		 *
		 * @see #isLocked
		 */
		public void setLocked(boolean locked)
		{
<span class="nc bnc" id="L484" title="All 2 branches missed.">			if (this.locked == locked)</span>
			{
<span class="nc" id="L486">				return;</span>
			}

			// Workaround so that you can't drag the divider when locked.
<span class="nc" id="L490">			this.locked = locked;</span>
<span class="nc" id="L491">			configureProps();</span>

<span class="nc bnc" id="L493" title="All 2 branches missed.">			if (locked)</span>
			{
<span class="nc" id="L495">				wasContinuousLayout = isContinuousLayout();</span>
<span class="nc" id="L496">				setContinuousLayout(true);</span>
			}
			else
			{
<span class="nc" id="L500">				setContinuousLayout(wasContinuousLayout);</span>
			}

<span class="nc" id="L503">			maybeSetLockedComponent(getLeftComponent(), locked);</span>
<span class="nc" id="L504">			maybeSetLockedComponent(getRightComponent(), locked);</span>
<span class="nc" id="L505">		}</span>

	}

	/**
	 * Menu item for Center item in popup menu.
	 */
	private class CenterMenuItem extends JMenuItem implements ActionListener
	{

		CenterMenuItem()
<span class="nc" id="L516">		{</span>
<span class="nc" id="L517">			super(LanguageBundle.getString(&quot;in_center&quot;));</span>
<span class="nc" id="L518">			setMnemonic(LanguageBundle.getMnemonic(&quot;in_mn_center&quot;));</span>

<span class="nc" id="L520">			addActionListener(this);</span>
<span class="nc" id="L521">		}</span>

		/**
		 * Action for Center item in popup menu.
		 */
		@Override
		public void actionPerformed(ActionEvent e)
		{
<span class="nc" id="L529">			centerDividerLocations();</span>
<span class="nc" id="L530">		}</span>

	}

	/**
	 * Menu item for Continuous layout item in options menu.
	 */
	private final class ContinuousLayoutMenuItem extends JCheckBoxMenuItem implements ActionListener
	{

		ContinuousLayoutMenuItem()
<span class="nc" id="L541">		{</span>
<span class="nc" id="L542">			super(LanguageBundle.getString(&quot;in_smothRes&quot;));</span>
<span class="nc" id="L543">			setMnemonic(LanguageBundle.getMnemonic(&quot;in_mn_smothRes&quot;));</span>
<span class="nc" id="L544">			setSelected(isContinuousLayout());</span>

<span class="nc" id="L546">			addActionListener(this);</span>
<span class="nc" id="L547">		}</span>

		/**
		 * Action for Continuous layout item in options menu.
		 */
		@Override
		public void actionPerformed(ActionEvent e)
		{
<span class="nc bnc" id="L555" title="All 2 branches missed.">			setContinuousLayout(!isContinuousLayout());</span>
<span class="nc" id="L556">		}</span>

	}

	/**
	 * Menu item for Flip item in popup menu.
	 */
	private class FlipMenuItem extends JMenuItem implements ActionListener
	{

		FlipMenuItem()
<span class="nc" id="L567">		{</span>
<span class="nc" id="L568">			super(LanguageBundle.getString(&quot;in_flip&quot;));</span>

<span class="nc" id="L570">			setMnemonic(LanguageBundle.getMnemonic(&quot;in_mn_flip&quot;));</span>

<span class="nc" id="L572">			addActionListener(this);</span>
<span class="nc" id="L573">		}</span>

		/**
		 * Action for Flip item in popup menu.
		 */
		@Override
		public void actionPerformed(ActionEvent e)
		{
<span class="nc" id="L581">			flipOrientation();</span>
<span class="nc" id="L582">		}</span>

	}

	/**
	 * Menu item for One touch expandable item in options menu.
	 */
	private final class OneTouchExpandableMenuItem extends JCheckBoxMenuItem implements ActionListener
	{

		OneTouchExpandableMenuItem()
<span class="nc" id="L593">		{</span>
<span class="nc" id="L594">			super(LanguageBundle.getString(&quot;in_oneTouchExp&quot;));</span>
<span class="nc" id="L595">			setMnemonic(LanguageBundle.getMnemonic(&quot;in_mn_oneTouchExp&quot;));</span>
<span class="nc" id="L596">			setSelected(isOneTouchExpandable());</span>

<span class="nc" id="L598">			addActionListener(this);</span>
<span class="nc" id="L599">		}</span>

		/**
		 * Action for One touch expandable item in options menu.
		 */
		@Override
		public void actionPerformed(ActionEvent e)
		{
<span class="nc bnc" id="L607" title="All 2 branches missed.">			setOneTouchExpandable(!isOneTouchExpandable());</span>
<span class="nc" id="L608">		}</span>

	}

	/**
	 * Menu for Options item in popup menu.
	 */
	private final class OptionsMenu extends JMenu
	{

		OptionsMenu()
<span class="nc" id="L619">		{</span>
<span class="nc" id="L620">			super(LanguageBundle.getString(&quot;in_options&quot;));</span>
<span class="nc" id="L621">			setMnemonic(LanguageBundle.getMnemonic(&quot;in_mn_options&quot;));</span>

<span class="nc" id="L623">			this.add(new OneTouchExpandableMenuItem());</span>
<span class="nc" id="L624">			this.add(new ContinuousLayoutMenuItem());</span>
<span class="nc" id="L625">		}</span>

	}

	/**
	 * Mouse listener for popup menu.
	 */
<span class="nc" id="L632">	private class PopupListener extends PopupMouseAdapter</span>
	{

		@Override
		protected void maybeShowPopup(MouseEvent e)
		{
<span class="nc bnc" id="L638" title="All 2 branches missed.">			if (e.isPopupTrigger())</span>
			{
<span class="nc" id="L640">				showPopup(e);</span>
			}
<span class="nc bnc" id="L642" title="All 2 branches missed.">			else if (Utility.isShiftLeftMouseButton(e))</span>
			{
<span class="nc bnc" id="L644" title="All 2 branches missed.">				if (!isLocked())</span>
				{
<span class="nc" id="L646">					flipOrientation();</span>
				}
			}
<span class="nc" id="L649">		}</span>

		@Override
		public void showPopup(MouseEvent e)
		{
			JPopupMenu menu;
<span class="nc bnc" id="L655" title="All 2 branches missed.">			if (!isLocked())</span>
			{
<span class="nc bnc" id="L657" title="All 2 branches missed.">				if (popupMenu == null)</span>
				{
<span class="nc" id="L659">					popupMenu = new JPopupMenu();</span>
<span class="nc" id="L660">					popupMenu.add(new CenterMenuItem());</span>
<span class="nc" id="L661">					popupMenu.add(new FlipMenuItem());</span>
<span class="nc" id="L662">					popupMenu.add(new ResetMenuItem());</span>
<span class="nc" id="L663">					popupMenu.addSeparator();</span>
<span class="nc" id="L664">					popupMenu.add(new JMenuItem(lockAction));</span>
<span class="nc" id="L665">					popupMenu.addSeparator();</span>
<span class="nc" id="L666">					popupMenu.add(new OptionsMenu());</span>
				}
<span class="nc" id="L668">				menu = popupMenu;</span>
			}
			else
			{
<span class="nc" id="L672">				menu = new JPopupMenu();</span>
<span class="nc" id="L673">				menu.add(new JMenuItem(lockAction));</span>
			}
<span class="nc" id="L675">			menu.show(e.getComponent(), e.getX(), e.getY());</span>
<span class="nc" id="L676">		}</span>

	}

	/**
	 * Menu item for Reset item in popup menu.
	 */
	private final class ResetMenuItem extends JMenuItem implements ActionListener
	{

		ResetMenuItem()
<span class="nc" id="L687">		{</span>
<span class="nc" id="L688">			super(LanguageBundle.getString(&quot;in_reset&quot;));</span>
<span class="nc" id="L689">			setMnemonic(LanguageBundle.getMnemonic(&quot;in_mn_reset&quot;));</span>

<span class="nc" id="L691">			addActionListener(this);</span>
<span class="nc" id="L692">		}</span>

		/**
		 * Action for Reset item in popup menu.
		 */
		@Override
		public void actionPerformed(ActionEvent e)
		{
<span class="nc" id="L700">			resetToPreferredSizes();</span>
<span class="nc" id="L701">		}</span>

	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>