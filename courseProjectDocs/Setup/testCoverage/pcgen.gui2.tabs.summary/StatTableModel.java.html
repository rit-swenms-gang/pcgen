<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StatTableModel.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">pcgen</a> &gt; <a href="index.source.html" class="el_package">pcgen.gui2.tabs.summary</a> &gt; <span class="el_source">StatTableModel.java</span></div><h1>StatTableModel.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2010 (C) Connor Petty &lt;cpmeister@users.sourceforge.net&gt;
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
 *
 */
package pcgen.gui2.tabs.summary;

import java.awt.Component;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.text.DecimalFormat;
import java.text.ParseException;

import javax.swing.AbstractAction;
import javax.swing.AbstractCellEditor;
import javax.swing.Action;
import javax.swing.BorderFactory;
import javax.swing.Box;
import javax.swing.InputMap;
import javax.swing.JComponent;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JSpinner;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.KeyStroke;
import javax.swing.SpinnerNumberModel;
import javax.swing.SwingConstants;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableColumnModel;
import javax.swing.table.JTableHeader;
import javax.swing.table.TableCellEditor;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;

import pcgen.cdom.enumeration.IntegerKey;
import pcgen.core.PCStat;
import pcgen.facade.core.CharacterFacade;
import pcgen.facade.util.ListFacade;
import pcgen.facade.util.event.ReferenceEvent;
import pcgen.facade.util.event.ReferenceListener;
import pcgen.gui2.tabs.Utilities;
import pcgen.gui2.util.FontManipulation;
import pcgen.gui2.util.PrettyIntegerFormat;
import pcgen.gui2.util.table.TableCellUtilities;

/**
 * Model used for the Ability/statistics table.
 *
 */
public class StatTableModel extends AbstractTableModel implements ReferenceListener&lt;Number&gt;
{

	public static final String EDITABLE_COLUMN_ID = &quot;EDITABLE&quot;; //$NON-NLS-1$
	private static final String ABILITY_COLUMN_ID = &quot;ABILITY&quot;; //$NON-NLS-1$
	private static final String MOVEDOWN = &quot;movedown&quot;; //$NON-NLS-1$

	private static final int ABILITY_NAME = 0;
	private static final int EDITABLE_SCORE = 3;
	private static final int RACE_ADJ = 4;
	private static final int MISC_ADJ = 5;
	private static final int FINAL_ABILITY_SCORE = 1;
	private static final int ABILITY_MOD = 2;
	private final CharacterFacade character;
	private final ListFacade&lt;PCStat&gt; stats;
<span class="nc" id="L83">	private final StatRenderer renderer = new StatRenderer();</span>
<span class="nc" id="L84">	private final SpinnerEditor editor = new SpinnerEditor();</span>
	private final JTable table;

	public StatTableModel(CharacterFacade character, JTable jtable)
<span class="nc" id="L88">	{</span>
<span class="nc" id="L89">		this.character = character;</span>
<span class="nc" id="L90">		this.table = jtable;</span>
<span class="nc" id="L91">		this.stats = character.getDataSet().getStats();</span>
<span class="nc" id="L92">		int min = Integer.MAX_VALUE;</span>
<span class="nc bnc" id="L93" title="All 2 branches missed.">		for (PCStat sf : stats)</span>
		{
<span class="nc" id="L95">			min = Math.min(sf.getSafe(IntegerKey.MIN_VALUE), min);</span>
<span class="nc" id="L96">		}</span>
<span class="nc" id="L97">		editor.setMinValue(min);</span>

<span class="nc" id="L99">		final JTextField field = editor.getTextField();</span>
<span class="nc" id="L100">		InputMap map = field.getInputMap(JComponent.WHEN_FOCUSED);</span>

<span class="nc" id="L102">		map.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), MOVEDOWN);</span>
<span class="nc" id="L103">		map.put(KeyStroke.getKeyStroke(KeyEvent.VK_TAB, 0), MOVEDOWN);</span>
<span class="nc" id="L104">		Action action = new AbstractAction()</span>
<span class="nc" id="L105">		{</span>

			@Override
			public void actionPerformed(ActionEvent e)
			{
				//Logging.log(Logging.WARNING, &quot;Got handleEnter from &quot; + e.getSource());
<span class="nc" id="L111">				int row = table.getEditingRow();</span>
<span class="nc" id="L112">				final int col = table.getEditingColumn();</span>
<span class="nc" id="L113">				table.getCellEditor().stopCellEditing(); // store user input</span>
<span class="nc" id="L114">				final int nextRow = row + 1;</span>
<span class="nc" id="L115">				startEditingNextRow(table, col, nextRow, field);</span>
<span class="nc" id="L116">			}</span>

		};
<span class="nc" id="L119">		field.getActionMap().put(MOVEDOWN, action);</span>
<span class="nc" id="L120">	}</span>

	private void startEditingNextRow(final JTable statsTable, final int col, final int nextRow, JTextField textField)
	{
<span class="nc bnc" id="L124" title="All 8 branches missed.">		if (nextRow &gt;= 0 &amp;&amp; nextRow &lt; getRowCount() &amp;&amp; col &gt;= 0 &amp;&amp; col &lt; getColumnCount())</span>
		{
<span class="nc" id="L126">			statsTable.editCellAt(nextRow, col);</span>
<span class="nc" id="L127">			textField.requestFocusInWindow();</span>
		}
<span class="nc" id="L129">	}</span>

	@Override
	public int getRowCount()
	{
<span class="nc" id="L134">		return stats.getSize();</span>
	}

	public static void initializeTable(JTable statsTable)
	{
<span class="nc" id="L139">		JTableHeader tableHeader = statsTable.getTableHeader();</span>
<span class="nc" id="L140">		tableHeader.setResizingAllowed(false);</span>
<span class="nc" id="L141">		tableHeader.setReorderingAllowed(false);</span>

<span class="nc" id="L143">		statsTable.setAutoCreateColumnsFromModel(false);</span>
<span class="nc" id="L144">		DefaultTableColumnModel columnModel = new DefaultTableColumnModel();</span>
		{
<span class="nc" id="L146">			TableColumn column =</span>
<span class="nc" id="L147">					Utilities.createTableColumn(ABILITY_NAME, &quot;Ability&quot;, new AbilityHeaderCellRenderer(), true);</span>
<span class="nc" id="L148">			column.setIdentifier(ABILITY_COLUMN_ID);</span>
<span class="nc" id="L149">			columnModel.addColumn(column);</span>

<span class="nc" id="L151">			String htmlText = &quot;&lt;html&gt;&lt;div align=\&quot;center\&quot;&gt;Final&lt;br&gt;Score&lt;/div&gt;&lt;/html&gt;&quot;;</span>
<span class="nc" id="L152">			column = Utilities.createTableColumn(FINAL_ABILITY_SCORE, htmlText, new FixedHeaderCellRenderer(htmlText),</span>
				false);
<span class="nc" id="L154">			column.setCellRenderer(new ValueRenderer());</span>
<span class="nc" id="L155">			columnModel.addColumn(column);</span>

<span class="nc" id="L157">			TableCellRenderer renderer = new ModRenderer();</span>
<span class="nc" id="L158">			htmlText = &quot;&lt;html&gt;&lt;div align=\&quot;center\&quot;&gt;Ability&lt;br&gt;Mod&lt;/div&gt;&lt;/html&gt;&quot;;</span>
<span class="nc" id="L159">			column = Utilities.createTableColumn(ABILITY_MOD, htmlText, new FixedHeaderCellRenderer(htmlText), false);</span>
<span class="nc" id="L160">			column.setCellRenderer(renderer);</span>
<span class="nc" id="L161">			columnModel.addColumn(column);</span>

<span class="nc" id="L163">			htmlText = &quot;&lt;html&gt;&lt;div align=\&quot;center\&quot;&gt;Editable&lt;br&gt;Score&lt;/div&gt;&lt;/html&gt;&quot;;</span>
<span class="nc" id="L164">			column = Utilities.createTableColumn(EDITABLE_SCORE, htmlText, new FixedHeaderCellRenderer(htmlText),</span>
				false);
<span class="nc" id="L166">			column.setIdentifier(EDITABLE_COLUMN_ID);</span>
<span class="nc" id="L167">			columnModel.addColumn(column);</span>

<span class="nc" id="L169">			htmlText = &quot;&lt;html&gt;&lt;div align=\&quot;center\&quot;&gt;Race&lt;br&gt;Adj&lt;/div&gt;&lt;/html&gt;&quot;;</span>
<span class="nc" id="L170">			column = Utilities.createTableColumn(RACE_ADJ, htmlText, new FixedHeaderCellRenderer(htmlText), false);</span>
<span class="nc" id="L171">			column.setCellRenderer(renderer);</span>
<span class="nc" id="L172">			columnModel.addColumn(column);</span>

<span class="nc" id="L174">			htmlText = &quot;&lt;html&gt;&lt;div align=\&quot;center\&quot;&gt;Misc&lt;br&gt;Adj&lt;/div&gt;&lt;/html&gt;&quot;;</span>
<span class="nc" id="L175">			column = Utilities.createTableColumn(MISC_ADJ, htmlText, new FixedHeaderCellRenderer(htmlText), false);</span>
<span class="nc" id="L176">			column.setCellRenderer(renderer);</span>
<span class="nc" id="L177">			columnModel.addColumn(column);</span>
		}
<span class="nc" id="L179">		statsTable.setColumnModel(columnModel);</span>
<span class="nc" id="L180">		statsTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);</span>
<span class="nc" id="L181">		statsTable.setShowVerticalLines(false);</span>
<span class="nc" id="L182">		statsTable.setCellSelectionEnabled(false);</span>
<span class="nc" id="L183">		statsTable.setFocusable(false);</span>
		// XXX this should be calculated relative to font size and the size of a jspinner
<span class="nc" id="L185">		statsTable.setRowHeight(27);</span>
<span class="nc" id="L186">		statsTable.setOpaque(false);</span>
<span class="nc" id="L187">		tableHeader.setFont(FontManipulation.title(statsTable.getFont()));</span>
<span class="nc" id="L188">		FontManipulation.large(statsTable);</span>
<span class="nc" id="L189">	}</span>

	/**
	 * This renders the header for the Ability name. Mostly this just
	 * delegates to the L&amp;F default table header renderer but centers the
	 * resulting label.
	 */
	private static class AbilityHeaderCellRenderer implements TableCellRenderer
	{
		@Override
		public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus,
			int row, int column)
		{
<span class="nc" id="L202">			Component comp = table.getTableHeader().getDefaultRenderer().getTableCellRendererComponent(table, value,</span>
				isSelected, hasFocus, row, column);
<span class="nc" id="L204">			JLabel label = (JLabel) comp;</span>
<span class="nc" id="L205">			label.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L206">			return label;</span>
		}

	}

	/*
	 * This class is a hack that gives the TableHeaderUI a dummy component
	 * so that it can be used when calculating the height of the JTableHeader.
	 */
	private static class FixedHeaderCellRenderer extends JLabel implements TableCellRenderer
	{

		public FixedHeaderCellRenderer(String text)
<span class="nc" id="L219">		{</span>
<span class="nc" id="L220">			setText(text);</span>
<span class="nc" id="L221">			setBorder(BorderFactory.createEmptyBorder(2, 5, 2, 10));</span>
<span class="nc" id="L222">		}</span>

		@Override
		public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus,
			int row, int column)
		{
<span class="nc bnc" id="L228" title="All 2 branches missed.">			if (table == null)</span>
			{
<span class="nc" id="L230">				return this;</span>
			}
<span class="nc" id="L232">			return table.getTableHeader().getDefaultRenderer().getTableCellRendererComponent(table, value, isSelected,</span>
				hasFocus, row, column);
		}

	}

	private static class ModRenderer extends JLabel implements TableCellRenderer
	{

<span class="nc" id="L241">		private DecimalFormat formatter = PrettyIntegerFormat.getFormat();</span>

		public ModRenderer()
<span class="nc" id="L244">		{</span>
<span class="nc" id="L245">			setHorizontalAlignment(SwingConstants.RIGHT);</span>
<span class="nc" id="L246">			setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 7));</span>
<span class="nc" id="L247">		}</span>

		@Override
		public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus,
			int row, int column)
		{
<span class="nc" id="L253">			Font tableFont = table.getFont();</span>
<span class="nc bnc" id="L254" title="All 2 branches missed.">			if (column &lt; 3)</span>
			{
<span class="nc" id="L256">				setFont(FontManipulation.bold(tableFont));</span>
			}
			else
			{
<span class="nc" id="L260">				setFont(FontManipulation.plain(tableFont));</span>
			}
<span class="nc" id="L262">			setBackground(table.getBackground());</span>
<span class="nc" id="L263">			setForeground(table.getForeground());</span>
<span class="nc" id="L264">			Integer mod = (Integer) value;</span>
<span class="nc bnc" id="L265" title="All 4 branches missed.">			if (mod == 0 &amp;&amp; column &gt; 3)</span>
			{
				// let's use a pretty em dash instead of hyphen/minus.
<span class="nc" id="L268">				setText(&quot;\u2014&quot;);</span>
			}
			else
			{
<span class="nc" id="L272">				setText(formatter.format(mod.longValue()));</span>
			}
<span class="nc" id="L274">			return this;</span>
		}

	}

	/**
	 * The Class {@code ValueRenderer} displays a right aligned
	 * read-only column containing a string value.
	 */
	private static class ValueRenderer extends JLabel implements TableCellRenderer
	{

		/**
		 * Create a new ValueRenderer instance.
		 */
		public ValueRenderer()
<span class="nc" id="L290">		{</span>
<span class="nc" id="L291">			setHorizontalAlignment(SwingConstants.RIGHT);</span>
<span class="nc" id="L292">			setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 7));</span>
<span class="nc" id="L293">		}</span>

		@Override
		public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus,
			int row, int column)
		{
<span class="nc" id="L299">			setFont(FontManipulation.title(table.getFont()));</span>
<span class="nc" id="L300">			setBackground(table.getBackground());</span>
<span class="nc" id="L301">			setForeground(table.getForeground());</span>
<span class="nc" id="L302">			setText((String) value);</span>
<span class="nc" id="L303">			return this;</span>
		}

	}

	public void install()
	{
<span class="nc" id="L310">		table.setModel(this);</span>
<span class="nc" id="L311">		table.setDefaultRenderer(Object.class, renderer);</span>

<span class="nc" id="L313">		TableColumn abilityColumn = table.getColumn(ABILITY_COLUMN_ID);</span>
<span class="nc" id="L314">		int columnIndex = abilityColumn.getModelIndex();</span>
<span class="nc" id="L315">		int maxWidth = 0;</span>
<span class="nc bnc" id="L316" title="All 2 branches missed.">		for (PCStat aStat : stats)</span>
		{
<span class="nc" id="L318">			Component cell = renderer.getTableCellRendererComponent(table, aStat, false, false, -1, columnIndex);</span>
<span class="nc" id="L319">			maxWidth = Math.max(maxWidth, cell.getPreferredSize().width);</span>
<span class="nc" id="L320">		}</span>
		//we add some extra spacing to prevent ellipses from showing
<span class="nc" id="L322">		abilityColumn.setPreferredWidth(maxWidth + 4);</span>

<span class="nc" id="L324">		TableColumn column = table.getColumn(EDITABLE_COLUMN_ID);</span>
<span class="nc" id="L325">		column.setCellRenderer(new TableCellUtilities.SpinnerRenderer());</span>

<span class="nc" id="L327">		column.setCellEditor(editor);</span>
<span class="nc" id="L328">		Dimension size = table.getPreferredSize();</span>
<span class="nc" id="L329">		size.width = table.getTableHeader().getPreferredSize().width;</span>

<span class="nc" id="L331">		JScrollPane scrollPane = (JScrollPane) table.getParent().getParent();</span>
		//we want to add room for the vertical scroll bar so it doesn't
		//overlap with the table when it shows
<span class="nc" id="L334">		int vbarWidth = scrollPane.getVerticalScrollBar().getPreferredSize().width;</span>
<span class="nc" id="L335">		size.width += vbarWidth;</span>
<span class="nc" id="L336">		table.setPreferredScrollableViewportSize(size);</span>

		//because of the extra viewport size in the table it will
		//always look a bit off center, adding a row header to
		//the scroll pane fixes this
<span class="nc" id="L341">		scrollPane.setRowHeaderView(Box.createHorizontalStrut(vbarWidth));</span>

<span class="nc bnc" id="L343" title="All 2 branches missed.">		for (PCStat aStat : stats)</span>
		{
<span class="nc" id="L345">			character.getScoreBaseRef(aStat).addReferenceListener(this);</span>
<span class="nc" id="L346">		}</span>

<span class="nc" id="L348">	}</span>

	public void uninstall()
	{
<span class="nc bnc" id="L352" title="All 4 branches missed.">		if (table.isEditing() &amp;&amp; !editor.stopCellEditing())</span>
		{
<span class="nc" id="L354">			editor.cancelCellEditing();</span>
		}

<span class="nc bnc" id="L357" title="All 2 branches missed.">		for (PCStat aStat : stats)</span>
		{
<span class="nc" id="L359">			character.getScoreBaseRef(aStat).removeReferenceListener(this);</span>
<span class="nc" id="L360">		}</span>
<span class="nc" id="L361">	}</span>

	public static class SpinnerEditor extends AbstractCellEditor implements TableCellEditor, ChangeListener
	{

		protected final JSpinner spinner;

		public SpinnerEditor()
<span class="nc" id="L369">		{</span>
<span class="nc" id="L370">			this.spinner = new JSpinner(new SpinnerNumberModel(0, 0, null, 1));</span>
<span class="nc" id="L371">		}</span>

		/**
		 * Set a new lower bound for the spinner.
		 *
		 * @param minValue The new minimum value.
		 */
		public void setMinValue(int minValue)
		{
<span class="nc" id="L380">			SpinnerNumberModel spinnerModel = (SpinnerNumberModel) spinner.getModel();</span>
<span class="nc" id="L381">			spinnerModel.setMinimum(minValue);</span>
<span class="nc" id="L382">		}</span>

		public JTextField getTextField()
		{
<span class="nc" id="L386">			return ((JSpinner.DefaultEditor) spinner.getEditor()).getTextField();</span>
		}

		@Override
		public Object getCellEditorValue()
		{
<span class="nc" id="L392">			return spinner.getValue();</span>
		}

		@Override
		public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row,
			int column)
		{
<span class="nc" id="L399">			spinner.setValue(value);</span>
<span class="nc" id="L400">			spinner.addChangeListener(this);</span>
<span class="nc" id="L401">			return spinner;</span>
		}

		@Override
		public void stateChanged(ChangeEvent e)
		{
<span class="nc" id="L407">			stopCellEditing();</span>
<span class="nc" id="L408">		}</span>

		@Override
		public boolean stopCellEditing()
		{
			try
			{
<span class="nc" id="L415">				spinner.removeChangeListener(this);</span>
<span class="nc" id="L416">				spinner.commitEdit();</span>
			}
<span class="nc" id="L418">			catch (ParseException ex)</span>
			{
<span class="nc" id="L420">				return false;</span>
<span class="nc" id="L421">			}</span>
<span class="nc" id="L422">			return super.stopCellEditing();</span>
		}

	}

	@Override
	public boolean isCellEditable(int rowIndex, int columnIndex)
	{
<span class="nc bnc" id="L430" title="All 2 branches missed.">		return columnIndex == EDITABLE_SCORE;</span>
	}

	@Override
	public Class&lt;?&gt; getColumnClass(int columnIndex)
	{
<span class="nc bnc" id="L436" title="All 2 branches missed.">		if (columnIndex == ABILITY_NAME)</span>
		{
<span class="nc" id="L438">			return Object.class;</span>
		}
<span class="nc" id="L440">		return Integer.class;</span>
	}

	@Override
	public int getColumnCount()
	{
<span class="nc" id="L446">		return 6;</span>
	}

	@Override
	public Object getValueAt(int rowIndex, int columnIndex)
	{
<span class="nc" id="L452">		PCStat stat = stats.getElementAt(rowIndex);</span>
<span class="nc bnc" id="L453" title="All 7 branches missed.">		return switch (columnIndex)</span>
				{
<span class="nc" id="L455">					case ABILITY_NAME -&gt; stat;</span>
<span class="nc" id="L456">					case ABILITY_MOD -&gt; character.getModTotal(stat);</span>
<span class="nc" id="L457">					case EDITABLE_SCORE -&gt; character.getScoreBase(stat);</span>
<span class="nc" id="L458">					case RACE_ADJ -&gt; character.getScoreRaceBonus(stat);</span>
<span class="nc" id="L459">					case FINAL_ABILITY_SCORE -&gt; character.getScoreTotalString(stat);</span>
<span class="nc" id="L460">					case MISC_ADJ -&gt; character.getScoreOtherBonus(stat);</span>
<span class="nc" id="L461">					default -&gt; 0;</span>
				};
	}

	@Override
	public void setValueAt(Object aValue, int rowIndex, int columnIndex)
	{
<span class="nc" id="L468">		Number number = (Number) aValue;</span>
<span class="nc" id="L469">		character.setScoreBase(stats.getElementAt(rowIndex), number.intValue());</span>
<span class="nc" id="L470">		fireTableRowsUpdated(rowIndex, rowIndex);</span>
<span class="nc" id="L471">	}</span>

	@Override
	public void referenceChanged(ReferenceEvent&lt;Number&gt; e)
	{
<span class="nc" id="L476">		fireTableDataChanged();</span>
<span class="nc" id="L477">	}</span>

	/**
	 * Table renderer used for abilities/statistics.
	 */
	private static class StatRenderer extends JLabel implements TableCellRenderer
	{

		@Override
		public Component getTableCellRendererComponent(JTable jTable, Object value, boolean isSelected,
			boolean hasFocus, int row, int column)
		{
<span class="nc" id="L489">			setFont(FontManipulation.title(jTable.getFont()));</span>
			// Those two does not seem to change anything.
<span class="nc" id="L491">			setBackground(jTable.getBackground());</span>
<span class="nc" id="L492">			setForeground(jTable.getForeground());</span>
<span class="nc" id="L493">			PCStat stat = (PCStat) value;</span>
			//TODO: this should really call stat.toString()
<span class="nc" id="L495">			setText(stat.getDisplayName());</span>
<span class="nc" id="L496">			return this;</span>
		}

	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>