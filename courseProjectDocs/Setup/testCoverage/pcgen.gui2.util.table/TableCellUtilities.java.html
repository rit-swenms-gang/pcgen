<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TableCellUtilities.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">pcgen</a> &gt; <a href="index.source.html" class="el_package">pcgen.gui2.util.table</a> &gt; <span class="el_source">TableCellUtilities.java</span></div><h1>TableCellUtilities.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2008 Connor Petty &lt;cpmeister@users.sourceforge.net&gt;
 * 
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 * 
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 * 
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
 * 
 */
package pcgen.gui2.util.table;

import java.awt.Component;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.ParseException;

import javax.swing.AbstractCellEditor;
import javax.swing.JComponent;
import javax.swing.JRadioButton;
import javax.swing.JSpinner;
import javax.swing.JTable;
import javax.swing.JToggleButton;
import javax.swing.SpinnerModel;
import javax.swing.SwingConstants;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellEditor;
import javax.swing.table.TableCellRenderer;

public final class TableCellUtilities
{

<span class="nc" id="L45">	private static final TableCellRenderer DUMMY_RENDERER = new DefaultTableCellRenderer();</span>

	private TableCellUtilities()
	{
	}

	public static void setToRowBackground(Component c, JTable table, int row)
	{
<span class="nc" id="L53">		Component tableCellRendererComponent =</span>
<span class="nc" id="L54">				DUMMY_RENDERER.getTableCellRendererComponent(table, null, false, false, row, 0);</span>
<span class="nc" id="L55">		c.setBackground(tableCellRendererComponent.getBackground());</span>
<span class="nc" id="L56">	}</span>

	public static class RadioButtonEditor extends AbstractCellEditor implements ActionListener, TableCellEditor
	{

		private final JRadioButton button;

		RadioButtonEditor()
<span class="nc" id="L64">		{</span>
<span class="nc" id="L65">			this.button = new JRadioButton();</span>
<span class="nc" id="L66">			button.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L67">			button.addActionListener(this);</span>
<span class="nc" id="L68">		}</span>

		@Override
		public Object getCellEditorValue()
		{
<span class="nc" id="L73">			return button.isSelected();</span>
		}

		@Override
		public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row,
			int column)
		{
<span class="nc" id="L80">			boolean selected = false;</span>
<span class="nc bnc" id="L81" title="All 2 branches missed.">			if (value instanceof Boolean)</span>
			{
<span class="nc" id="L83">				selected = (Boolean) value;</span>
			}
<span class="nc bnc" id="L85" title="All 2 branches missed.">			else if (value instanceof String)</span>
			{
<span class="nc" id="L87">				selected = value.equals(&quot;true&quot;);</span>
			}
<span class="nc" id="L89">			button.setSelected(selected);</span>
<span class="nc" id="L90">			return button;</span>
		}

		@Override
		public void actionPerformed(ActionEvent e)
		{
<span class="nc" id="L96">			stopCellEditing();</span>
<span class="nc" id="L97">		}</span>

	}

	public static class SpinnerEditor extends AbstractCellEditor implements TableCellEditor, ChangeListener
	{

		protected final JSpinner spinner;

		public SpinnerEditor(SpinnerModel model)
		{
<span class="nc" id="L108">			this(new JSpinner(model));</span>
<span class="nc" id="L109">		}</span>

		private SpinnerEditor(JSpinner spinner)
<span class="nc" id="L112">		{</span>
<span class="nc" id="L113">			this.spinner = spinner;</span>
<span class="nc" id="L114">			spinner.addChangeListener(this);</span>
<span class="nc" id="L115">		}</span>

		@Override
		public Object getCellEditorValue()
		{
<span class="nc" id="L120">			return spinner.getValue();</span>
		}

		@Override
		public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row,
			int column)
		{
<span class="nc" id="L127">			spinner.setValue(value);</span>
<span class="nc" id="L128">			return spinner;</span>
		}

		@Override
		public void stateChanged(ChangeEvent e)
		{
<span class="nc" id="L134">			stopCellEditing();</span>
<span class="nc" id="L135">		}</span>

		@Override
		public boolean stopCellEditing()
		{
			try
			{
<span class="nc" id="L142">				spinner.commitEdit();</span>
			}
<span class="nc" id="L144">			catch (ParseException ex)</span>
			{
<span class="nc" id="L146">				return false;</span>
<span class="nc" id="L147">			}</span>
<span class="nc" id="L148">			return super.stopCellEditing();</span>
		}

	}

	public static final class ToggleButtonRenderer extends JComponent implements TableCellRenderer
	{

		private final JToggleButton button;
<span class="nc" id="L157">		private final DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();</span>

		ToggleButtonRenderer(JToggleButton button)
<span class="nc" id="L160">		{</span>
<span class="nc" id="L161">			this.button = button;</span>
<span class="nc" id="L162">			button.setHorizontalAlignment(SwingConstants.CENTER);</span>
<span class="nc" id="L163">			button.setBorderPainted(true);</span>
<span class="nc" id="L164">			setLayout(new GridLayout(1, 1));</span>
<span class="nc" id="L165">			add(button);</span>
<span class="nc" id="L166">		}</span>

		@Override
		public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus,
			int row, int column)
		{
<span class="nc" id="L172">			renderer.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);</span>
<span class="nc bnc" id="L173" title="All 2 branches missed.">			if (value == null)</span>
			{
<span class="nc" id="L175">				return renderer;</span>
			}
<span class="nc" id="L177">			setBackground(renderer.getBackground());</span>
<span class="nc" id="L178">			button.setSelected((Boolean) value);</span>
<span class="nc" id="L179">			return this;</span>
		}

		@Override
		protected void paintComponent(Graphics g)
		{
<span class="nc" id="L185">			g.setColor(getBackground());</span>
<span class="nc" id="L186">			g.fillRect(0, 0, getWidth(), getHeight());</span>
<span class="nc" id="L187">		}</span>

	}

	public static class SpinnerRenderer extends DefaultTableCellRenderer
	{

		private final JSpinner spinner;

		public SpinnerRenderer()
		{
<span class="nc" id="L198">			this(new JSpinner());</span>
<span class="nc" id="L199">		}</span>

		public SpinnerRenderer(JSpinner spinner)
<span class="nc" id="L202">		{</span>
<span class="nc" id="L203">			this.spinner = spinner;</span>
<span class="nc" id="L204">		}</span>

		@Override
		public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus,
			int row, int column)
		{
<span class="nc bnc" id="L210" title="All 2 branches missed.">			if (value == null)</span>
			{
<span class="nc" id="L212">				return super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);</span>
			}
<span class="nc" id="L214">			spinner.setValue(value);</span>
<span class="nc" id="L215">			spinner.setEnabled(table.isCellEditable(row, column));</span>
<span class="nc" id="L216">			return spinner;</span>
		}

	}

	/**
	 * Align the cell text in a column
	 */
	public static final class AlignRenderer extends DefaultTableCellRenderer
	{

		/**
		 * align is one of:
		 * SwingConstants.LEFT
		 * SwingConstants.CENTER
		 * X.RIGHT
		 **/
		private int align;
		private final boolean showTooltips;

		/**
		 * Create a new instance of AlignRenderer without tool tips.
		 * @param anInt The alignment constant, from SwingConstants.
		 */
		public AlignRenderer(int anInt)
		{
<span class="nc" id="L242">			this(anInt, false);</span>
<span class="nc" id="L243">		}</span>

		/**
		 * Create a new instance of AlignRenderer
		 * @param anInt The alignment constant, from SwingConstants.
		 * @param tooltips Should we show tool tips?
		 */
		public AlignRenderer(int anInt, boolean tooltips)
		{
<span class="nc" id="L252">			super();</span>
<span class="nc" id="L253">			align = anInt;</span>
<span class="nc" id="L254">			this.showTooltips = tooltips;</span>
<span class="nc" id="L255">			setHorizontalAlignment(align);</span>
<span class="nc" id="L256">		}</span>

		@Override
		public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus,
			int row, int column)
		{
<span class="nc" id="L262">			super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);</span>
<span class="nc bnc" id="L263" title="All 4 branches missed.">			setEnabled((table == null) || table.isEnabled());</span>
<span class="nc" id="L264">			setHorizontalAlignment(align);</span>
<span class="nc bnc" id="L265" title="All 2 branches missed.">			if (showTooltips)</span>
			{
<span class="nc" id="L267">				setToolTipText(String.valueOf(value));</span>
			}
<span class="nc" id="L269">			return this;</span>
		}

	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>